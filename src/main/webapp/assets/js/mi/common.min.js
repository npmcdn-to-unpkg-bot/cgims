!function(){$(function(){function e(){var e=$(this);e.hasClass("open")?e.find("ul").css("display","none"):e.find("ul").css("display","block"),e.toggleClass("open")}function t(){$(this).parent().find(".filename").html($(this).val())}$(document).delegate("li.submenu","click",e),$(document).delegate(".uploader input","change",t);var a=function(){var e=window.innerHeight;return"number"!=typeof e&&(e="CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight),e-77}();$("div.container").css("min-height",a+"px")})}(),function(e){function t(e){this.options={container:"",template:"",url:"",data:{}},$.extend(this.options,e),this.$container=$(this.options.container)}var a={mix:function(e,t,a){for(var n in t)e[t]&&a||(e[t]=a[t]);return e},toArray:function(e,t){return[].slice.call(e,t||0)},cookie:function(e,t,a){var n,i,o;return arguments.length>1?(a=a||30,(null===t||void 0===t)&&(a=-1),"number"==typeof a&&(n=24*a*60*60*1e3,i=a=new Date,i.setTime(i.getTime()+n)),t=String(t),document.cookie=[encodeURIComponent(e),"=",encodeURIComponent(t),"; expires=",a.toGMTString(),"; path='/'"].join("")):(o=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?decodeURIComponent(o[1]):null}};e.util=a,t.prototype={init:function(e){this.getPage(e)},setData:function(e){$.extend(this.options.data,e)},template:function(e,t){var a=Handlebars.compile($(e).html());return a(t)},getPage:function(e){var t=this,a=e||1,n=t.options.url+a;$.ajax({type:"GET",url:n,dataType:"json",async:!0,data:t.options.data,success:function(e){if(null==e||null==e.items||0==e.items.length){t.$container.find(".page-data-list").html("");var a=t.$container.find(".pagination");a.html("");var n=t.$container.find(".datatable-info");return void n.html("共0条")}var i=e.items,o=e.pageinfo;t.$container.find(".page-data-list").html(t.template(t.options.template,i)),t.pagination(o)},error:function(){}})},pagination:function(e){var t=this;t.removePaginationHandle();var a=t.$container.find(".pagination"),n=t.$container.find(".datatable-info"),i=e.pagesize||10,o=(e.curpage-1)*i+1,r=e.curpage*i>=e.totalrows?e.totalrows:e.curpage*i;n.html("共"+e.totalrows+"条 当前展示第"+o+"条到第"+r+"条");var l=parseInt(e.curpage,10);if("1"==e.totalpage)return void a.html("");for(var c='<li  class="active"><a href="javascript:;"  data-page="'+l+'">'+l+" </a></li>",p=l-1,s=l+1,d="",u=parseInt(e.totalpage,10);p>l-4&&p>1;p--)c='<li><a href="javascript:;" data-page="'+p+'">'+p+"</a></li>"+c;for(1!=l&&(2==p?d='<li><a href="javascript:;"  data-page="2">2</a>':p>2&&(d='<li><a  href="javascript:;" class="blank">...</a></li>'),c='<li><a href="javascript:;"  data-page="1">1</a>'+d+c);l+4>s&&u>s;s++)c+='<li><a href="javascript:;" data-page="'+s+'">'+s+"</a></li>";l!=u&&(s==u-1?c+='<li><a href="javascript:;"  data-page="'+(u-1)+'">'+(u-1)+"</a>":u-1>s&&(c+='<li><a href="javascript:;" class="blank">...</a></li>'),c+='<li><a href="javascript:;"  data-page="'+e.totalpage+'">'+e.totalpage+" </a></li>"),a.html(c),a.data("curpage",e.curpage),a.data("totalpage",e.totalpage),t.addPaginationHandle(a)},addPaginationHandle:function(){var e=this,t=e.$container.find(".pagination");e.paginationHandle=function(t){t.preventDefault();var a=$(this),n=a.data("page");"pre"==n?e.prex():"next"==n?e.next():e.getPage(n)},t.delegate("a","click",e.paginationHandle)},removePaginationHandle:function(){var e=this;e.$container.find(".pagination").undelegate("a","click",e.paginationHandle)},prex:function(){var e=this,t=e.$container.find(".pagination"),a=t.data("curpage")||0;a=a-1>0?a-1:1,e.getPage(a)},next:function(){var e=this,t=e.$container.find(".pagination"),a=t.data("curpage")||0,n=t.data("totalpage")||0;a=a+1>n?n:a+1,e.getPage(a)},reloadPage:function(){var e=this,t=e.$container.find(".pagination"),a=t.data("curpage")||0;e.getPage(a)}},e.Page=t,e.addCookie=function(e,t,a){var n=e+"="+escape(t);if(a>0){var i=new Date;i.setTime(i.getTime()+24*a*3600*1e3),n=n+"; expires="+i.toGMTString()}n+=";path=/",document.cookie=n},e.getCookie=function(e){for(var t=document.cookie,a=t.split("; "),n=0;n<a.length;n++){var i=a[n].split("=");if(i[0]==e)return unescape(i[1])}return""},e.deleteCookie=function(e){var t=new Date;t.setTime(t.getTime()-1e4),document.cookie=e+"=v; expires="+t.toGMTString()+";path=/"},e.showerror=function(e,t){var a=null;0==(a=e.next(".help-inline")).length&&(a=$("<div class='help-inline'></div>"),e.after(a)),1==arguments.length?a.hide():(a.html(t),a.show())}}(window),function(e){e.fn.extend({validate:function(){var t=e(this),a=t.find("input"),n=t.find("textarea"),i=[];a.each(function(){var t=e(this),a=t.attr("type")||"";"text/email/url/password/phonenumber/".indexOf(a)>-1&&i.push(t)}),n.each(function(){i.push(e(this))});for(var o=function(t,a){var n=null;0==(n=t.next(".help-inline")).length&&(n=e("<div class='help-inline'></div>"),t.after(n)),1==arguments.length?n.hide():(n.html(a),n.show())},r=!0,l=0,c=i.length;c>l;l++){var p,s,d,u,g,f,h,m=!0,v=i[l];if(s=v.attr("max"),d=v.attr("min"),u=v.attr("error")||"输入内容格式错误",g=v.attr("require"),f=v.attr("require_msg")||"不能为空",h=v.attr("patterns"),p=v.val(),("undefined"==typeof p||0==e.trim(p).length||null==p)&&(p=""),len=p.length,"undefined"!=typeof g||0!=len){if("require"==g&&0==len)o(v,f),m=!1;else if(d&&len<d)o(v,u),m=!1;else if(s&&len>s)o(v,u),m=!1;else if(h){var $=new RegExp(h);$.test(p)||(o(v,u),m=!1)}m&&o(v),!m&&(r=m)}else o(v)}return r}})}(jQuery);